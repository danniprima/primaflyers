function countChar(n){var t=n.length;t>=400?n.value=n.value.substring(0,400):jQuery("#spnChars").text(400-t)}function reportGWError(n){n.status>0&&alert("Error processing request, please try again.")}function updateGiftWrapOption(){var n="",t="";t="id="+jQuery("#giftwrap_id").val()+"&action=2",n="giftwrap_ajax.asp?"+t+"&no-cache="+Math.random(),jQuery.ajax({url:n,dataType:"html",type:"GET",cache:!1,success:function(n){n==""||jQuery("#divGiftwrapItem").html(n)},error:reportGWError})}function cmdGWAdd_Click(){var t="",n="",i=document.getElementById("giftwrap_id").value;if(i=="")return alert(jQuery("#giftwrap_pleaseselect").val()),!1;n="parentid="+parentid,n+="&id="+i,n+="&action=3",n+="&giftwrap_message="+document.getElementById("giftwrap_message").value,t="giftwrap_ajax.asp?"+n+"&no-cache="+Math.random(),jQuery.ajax({url:t,dataType:"html",type:"GET",cache:!1,success:function(){jQuery("#divGiftWrap").modal("hide"),window.location="view_cart.asp"},error:reportGWError})}function showGiftWrap(n){var t="",i="";i="id="+n+"&action=1",parentid=n,t="giftwrap_ajax.asp?"+i+"&no-cache="+Math.random(),jQuery.ajax({url:t,dataType:"html",type:"GET",cache:!1,success:function(n){n==""||(jQuery("#divGiftWrap").replaceWith(n),jQuery("#divGiftWrap").modal("show"),jQuery("#cmdGWAdd").click(function(){cmdGWAdd_Click()}),jQuery("#giftwrap_message").keyup(function(){countChar(jQuery(this).val())}))},error:reportGWError})}jQuery(function(){jQuery(".giftwraplink a").click(function(n){n.preventDefault();var t=jQuery(this).data("itemid");showGiftWrap(t)})})